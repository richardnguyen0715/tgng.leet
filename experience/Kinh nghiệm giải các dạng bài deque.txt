Ráº¥t tá»‘t ğŸ‘
DÆ°á»›i Ä‘Ã¢y lÃ  **báº£n tá»•ng há»£p â€œxÆ°Æ¡ng sá»‘ngâ€ kinh nghiá»‡m** cho **dáº¡ng Sliding Window + Monotonic Deque (maxâ€“min window)** â€” Ä‘á»c xong lÃ  **khÃ´ng cÃ²n bá»‹ láº¡c hÆ°á»›ng ná»¯a**.

---

# ğŸ§  Tá»”NG Há»¢P KINH NGHIá»†M

## Sliding Window + Monotonic Deque

*(Longest / Shortest subarray vá»›i rÃ ng buá»™c maxâ€“min)*

---

## 1ï¸âƒ£ Nháº­n diá»‡n Ä‘Ãºng dáº¡ng bÃ i (QUAN TRá»ŒNG NHáº¤T)

Gáº·p bÃ i cÃ³ cÃ¡c dáº¥u hiá»‡u sau â‡’ **nghÄ© ngay Ä‘áº¿n 2 deque**:

* Subarray **liÃªn tá»¥c**
* CÃ³ rÃ ng buá»™c dáº¡ng:

  ```text
  max(window) - min(window) â‰¤ K
  ```
* Há»i:

  * longest
  * shortest
  * count subarrays

ğŸ“Œ Náº¿u báº¡n Ä‘ang:

* so vá»›i `nums[left]`
* hoáº·c dÃ¹ng 2 vÃ²ng for
  â†’ **sai hÆ°á»›ng**

---

## 2ï¸âƒ£ Invariant pháº£i thuá»™c náº±m lÃ²ng

Trong má»i thá»i Ä‘iá»ƒm, window `[left, right]` pháº£i thá»a:

```text
maxDeque[0] = max(window)
minDeque[0] = min(window)
```

VÃ :

```text
maxDeque[0] - minDeque[0] â‰¤ limit
```

ğŸ‘‰ Náº¿u invariant nÃ y Ä‘Ãºng, bÃ i coi nhÆ° xong 80%.

---

## 3ï¸âƒ£ CÃ¡ch xÃ¢y 2 monotonic deque (chuáº©n)

### Max deque (giáº£m dáº§n)

```python
while maxD and nums[right] > maxD[-1]:
    maxD.pop()
maxD.append(nums[right])
```

### Min deque (tÄƒng dáº§n)

```python
while minD and nums[right] < minD[-1]:
    minD.pop()
minD.append(nums[right])
```

ğŸ“Œ **Chá»‰ pop tá»« cuá»‘i, chá»‰ peek á»Ÿ Ä‘áº§u**

---

## 4ï¸âƒ£ Khi nÃ o pháº£i co cá»­a sá»•?

```python
while maxD[0] - minD[0] > limit:
```

âš ï¸ **KhÃ´ng dÃ¹ng `if` â€” pháº£i lÃ  `while`**

VÃ¬:

* cÃ³ thá»ƒ cáº§n co **nhiá»u bÆ°á»›c liÃªn tiáº¿p**

---

## 5ï¸âƒ£ Co `left` Ä‘Ãºng cÃ¡ch (ráº¥t hay sai)

Khi `left` tÄƒng:

```python
if nums[left] == maxD[0]:
    maxD.popleft()
if nums[left] == minD[0]:
    minD.popleft()
left += 1
```

ğŸ“Œ **KhÃ´ng pop bá»«a**, chá»‰ pop náº¿u giÃ¡ trá»‹ **Ä‘Ãºng á»Ÿ Ä‘áº§u deque**

---

## 6ï¸âƒ£ VÃ¬ sao luÃ´n O(n)? (amortized proof)

Má»—i pháº§n tá»­:

* Ä‘Æ°á»£c push **1 láº§n**
* Ä‘Æ°á»£c pop **1 láº§n**

ğŸ‘‰ Tá»•ng thao tÃ¡c â‰¤ `2n`

ğŸ“Œ KhÃ´ng cáº§n lo while lá»“ng nhau

---

## 7ï¸âƒ£ Nhá»¯ng lá»—i kinh Ä‘iá»ƒn (nÃ© gáº¥p)

âŒ So vá»›i `nums[left]`
âŒ DÃ¹ng `abs(nums[i] - nums[j])`
âŒ Rebuild max/min má»—i window
âŒ Heap + lazy delete (TLE)
âŒ QuÃªn pop khi `left` Ä‘i qua
âŒ DÃ¹ng `if` thay vÃ¬ `while` khi shrink

---

## 8ï¸âƒ£ Test case tá»± check trÆ°á»›c khi submit

```text
[1,10,2,9,3], limit = 3        â†’ zig-zag
[4,4,4,1000000000,4,4], limit = 0
[1,2,3,4,5,...], limit = 0
[5,5,5,5], limit = 0
```

Náº¿u pass háº¿t â†’ code Ä‘Ãºng 99%.

---

## 9ï¸âƒ£ Template chuáº©n (ghi nhá»›)

```python
left = 0
for right in range(n):
    push nums[right] vÃ o maxD
    push nums[right] vÃ o minD

    while maxD[0] - minD[0] > limit:
        náº¿u nums[left] == maxD[0]: pop left
        náº¿u nums[left] == minD[0]: pop left
        left += 1

    update answer
```

---

## 10ï¸âƒ£ CÃ¡c bÃ i cÃ¹ng â€œhá»â€ (ráº¥t nÃªn luyá»‡n)

* Longest Continuous Subarray With Absolute Diff â‰¤ Limit
* Sliding Window Maximum
* Continuous Subarrays (LC 2762)
* Shortest Subarray with Max-Min â‰¤ K
* Daily Temperatures (1 deque)
* Stock Span (1 deque)

ğŸ“Œ **Hiá»ƒu 1 bÃ i â†’ Äƒn trá»n cáº£ há»**

---

## ğŸ¯ Insight cuá»‘i (ráº¥t quan trá»ng)

> **KhÃ´ng bao giá» track â€œdistanceâ€ giá»¯a 2 pháº§n tá»­**
> â†’ chá»‰ track **max vÃ  min cá»§a window**

---

Náº¿u báº¡n muá»‘n, mÃ¬nh cÃ³ thá»ƒ:

* Viáº¿t checklist suy nghÄ© khi gáº·p bÃ i má»›i
* So sÃ¡nh vá»›i multiset / heap
* ÄÆ°a thÃªm bÃ i nÃ¢ng cáº¥p Ä‘á»ƒ luyá»‡n sÃ¢u

Cá»© nÃ³i ğŸ‘
